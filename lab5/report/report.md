---
title: "Практическая работа № 6. Проектирование модели потоков данных в нотации DFD"
author: "Грибков Александр"
date: "02.11.2025"
lang: ru-RU
geometry: margin=2cm
fontsize: 14pt
linestretch: 1.5
documentclass: article
papersize: a4
toc: true
toc-depth: 3
numbersections: true
header-includes:
  - \usepackage{setspace}
  - \onehalfspacing
  - \usepackage{indentfirst}
  - \setlength{\parindent}{1.25cm}
---

\newpage

# Практическая работа № 6. Проектирование модели потоков данных в нотации DFD

**Тема:** Декомпозиция процесса "Оформлять договор аренды" в нотации DFD

**Выполнил:** Грибков Александр
**Дата:** 02.11.2025
**Проект:** SportRent - Система управления арендой спортивного оборудования

## Цель работы

Целью данной практической работы является продолжение создания описания проектируемой информационной системы SportRent, которое заключается в выборе наиболее значимого функционального блока нижнего уровня декомпозиции из предыдущей практической работы и проектировании его декомпозиции в нотации DFD (диаграмма потоков данных), а также подготовка к выполнению диаграммы сущность-связь проектирования баз данных ИС.

## Задачи работы

1. Выбрать наиболее значимый функциональный блок из IDEF0-модели, разработанной в лабораторной работе № 5
2. Разработать контекстную диаграмму DFD Level 0 для выбранного процесса
3. Выполнить декомпозицию процесса на уровне DFD Level 1
4. Составить подробное текстовое описание процессов, потоков данных, хранилищ и внешних сущностей
5. Сформулировать выводы о проделанной работе

\newpage

## Теоретическая часть

### Диаграммы потоков данных (DFD)

**DFD (Data Flow Diagram)** — это графическая нотация для описания потоков данных в информационной системе. Диаграммы потоков данных показывают, как данные перемещаются между процессами, хранилищами данных и внешними сущностями, не акцентируя внимание на управлении процессами.

DFD широко используется на этапе проектирования информационных систем для:

- Визуализации движения данных в системе
- Идентификации хранилищ данных и их структуры
- Выявления точек взаимодействия между модулями
- Подготовки к проектированию базы данных
- Документирования информационных потоков

### Нотация Гейна-Сарсона

Существует два основных синтаксиса DFD: нотация Йордана-Де Марко и нотация Гейна-Сарсона. В данной работе используется нотация **Гейна-Сарсона**, которая применяется в программе Ramus Educational и включает следующие элементы:

**Основные элементы диаграммы:**

| Элемент | Графическое обозначение | Описание |
|---------|------------------------|----------|
| **Процесс** | Прямоугольник с закругленными углами | Функциональный блок, преобразующий входные данные в выходные. Содержит номер и название процесса. |
| **Поток данных** | Стрелка с подписью | Показывает направление движения данных между элементами. Может быть двунаправленным. |
| **Хранилище данных** | Прямоугольник с открытой левой стороной | Представляет базы данных, файлы, таблицы, где данные хранятся постоянно или временно. |
| **Внешняя сущность** | Прямоугольник | Объекты, находящиеся вне границ системы, но взаимодействующие с ней (пользователи, внешние системы). |

### Правила построения DFD

При создании диаграмм потоков данных необходимо соблюдать следующие правила:

1. **Обязательные потоки:** У каждого процесса должен быть минимум один входящий и один выходящий поток данных
2. **Взаимодействие процессов:** Процессы активно взаимодействуют друг с другом либо напрямую, либо через хранилища данных
3. **Равнозначность потоков:** Стрелки (потоки данных) равнозначны и могут присоединяться к любой стороне процессов
4. **Количество процессов:** На одном уровне декомпозиции рекомендуется размещать от 3 до 7 процессов
5. **Именование потоков:** Каждый поток данных должен иметь понятное название, описывающее передаваемую информацию
6. **Хранилища данных:** Используются для моделирования баз данных, файлов, архивов
7. **Внешние сущности:** Показывают, кто получает или передает информацию в систему

### Отличия DFD от IDEF0

Важно понимать различия между нотациями DFD и IDEF0:

| Характеристика | IDEF0 | DFD |
|----------------|-------|-----|
| **Фокус** | Функции и управление | Потоки данных |
| **Типы стрелок** | Вход, Выход, Управление, Механизм | Только потоки данных |
| **Хранилища** | Не показываются явно | Явно показаны |
| **Граничные стрелки** | Обязательны | Не рекомендуются |
| **Применение** | Функциональное моделирование | Проектирование данных |

### Уровни декомпозиции DFD

DFD-диаграммы строятся иерархически с несколькими уровнями детализации:

- **Level 0 (Контекстная диаграмма)** — показывает систему или процесс как единое целое с внешними взаимодействиями
- **Level 1** — детализация процесса Level 0 на подпроцессы с показом внутренних потоков данных и хранилищ
- **Level 2 и далее** — дальнейшая детализация отдельных процессов при необходимости

\newpage

## Практическая часть

### Выбор функционального блока для декомпозиции

В предыдущей лабораторной работе № 5 была создана IDEF0-диаграмма системы SportRent с двумя уровнями декомпозиции.

**Уровень A0** включал 6 основных функциональных блоков:

- **A1:** Управлять аутентификацией и профилями клиентов
- **A2:** Управлять каталогом оборудования
- **A3:** Обрабатывать бронирование и заказы
- **A4:** Обрабатывать платежи
- **A5:** Управлять складскими операциями
- **A6:** Формировать отчетность

**Уровень A3** (декомпозиция блока "Обрабатывать бронирование и заказы") включал 5 подпроцессов:

- **A31:** Проверять доступность оборудования
- **A32:** Формировать бронирование
- **A33:** Оформлять договор аренды ← **выбран для DFD-декомпозиции**
- **A34:** Передавать заказ на оплату
- **A35:** Подтверждать заказ

### Обоснование выбора блока A33

Блок **A33 "Оформлять договор аренды"** выбран для декомпозиции в нотации DFD по следующим причинам:

1. **Сложность процесса** — оформление договора включает множество этапов: получение шаблона, заполнение данных, проверку, утверждение, сохранение

2. **Множественные потоки данных** — процесс работает с данными клиентов, оборудования, бронирований, платежей, что идеально подходит для демонстрации DFD

3. **Активное взаимодействие с хранилищами** — требуется обращение к базам данных шаблонов, клиентов, оборудования, архиву договоров

4. **Наличие внешних сущностей** — в процессе участвуют клиенты, менеджеры, система оплаты

5. **Обратные связи** — при обнаружении ошибок требуется возврат данных на этап исправления

6. **Критичность для бизнеса** — договор аренды является основным юридическим документом, регламентирующим отношения между системой и клиентом

7. **Подходящая сложность для учебной работы** — процесс достаточно сложен для демонстрации всех элементов DFD, но при этом не перегружен избыточными деталями

\newpage

### DFD Level 0: Контекстная диаграмма

![DFD Level 0: Контекстная диаграмма процесса "Оформлять договор аренды"](../solutions/diagrams/dfd-level0.png)

**Рисунок 1.** Контекстная диаграмма DFD Level 0

Контекстная диаграмма Level 0 показывает процесс "Оформлять договор аренды" (A33) как единое целое с его внешними взаимодействиями.

#### Входящие потоки данных

1. **Данные клиента** (от внешней сущности "Клиент")
   - Содержание: ФИО, паспортные данные, контактная информация (телефон, email, адрес)
   - Назначение: Идентификация клиента и заполнение персональных данных в договоре
   - Источник: Форма регистрации или профиль клиента в системе

2. **Данные бронирования** (от модуля бронирования)
   - Содержание: Информация об оборудовании (наименование, серийный номер), сроки аренды (дата начала, дата окончания), стоимость аренды, условия залога
   - Назначение: Определение предмета договора и финансовых условий
   - Источник: Результат работы процесса A32 "Формировать бронирование"

3. **Статус оплаты** (от внешней сущности "Система оплаты")
   - Содержание: Подтверждение успешной оплаты или внесения авансового платежа, сумма платежа, дата и время транзакции
   - Назначение: Проверка финансовой готовности к заключению договора
   - Источник: Внешняя платежная система или процесс A34 "Передавать заказ на оплату"

#### Исходящие потоки данных

1. **Проект договора на утверждение** (к внешней сущности "Менеджер")
   - Содержание: Сформированный проект договора с заполненными данными
   - Назначение: Проверка договора менеджером перед финализацией
   - Получатель: Менеджер компании, ответственный за утверждение договоров

2. **Договор аренды** (к внешней сущности "Клиент")
   - Содержание: Окончательный подписанный договор в формате PDF с электронной подписью, QR-кодом для проверки подлинности
   - Назначение: Передача клиенту официального документа, подтверждающего аренду
   - Получатель: Клиент (электронная копия на email и/или бумажная версия)

3. **Данные договора для архива** (к хранилищу "Архив договоров")
   - Содержание: Полная информация о договоре, включая номер, дату, стороны, условия, статус
   - Назначение: Долгосрочное хранение для отчетности, аудита, разрешения споров
   - Получатель: Электронный архив договоров компании

#### Внешние сущности

- **Клиент** — физическое или юридическое лицо, арендующее спортивное оборудование
- **Менеджер** — сотрудник компании, ответственный за проверку и утверждение договоров аренды
- **Система оплаты** — внешний модуль обработки платежей, интегрированный с банковскими системами
- **Модуль бронирования** — внутренняя система, формирующая предварительные бронирования (процесс A32)
- **Архив договоров** — централизованное хранилище всех заключенных договоров

\newpage

### DFD Level 1: Детализация процесса

![DFD Level 1: Детализация процесса "Оформлять договор аренды"](../solutions/diagrams/dfd-level1.png)

**Рисунок 2.** Диаграмма потоков данных DFD Level 1

Диаграмма Level 1 детализирует процесс "Оформлять договор аренды" на шесть взаимосвязанных подпроцессов, показывая внутреннюю логику обработки данных.

#### Подпроцесс 1.1: Получить шаблон договора

**Назначение:** Получение актуального шаблона договора аренды из базы данных шаблонов.

**Входящие потоки:**
- Запрос на получение шаблона (инициируется автоматически при начале процесса оформления)
- Параметры запроса: тип оборудования, категория клиента, особые условия

**Исходящие потоки:**
- **Шаблон договора** → Процесс 1.2
  - Содержит: структуру документа, юридические формулировки, поля для заполнения, требования к оформлению

**Взаимодействие с хранилищами:**
- **БД шаблонов договоров** (чтение)
  - Содержит актуальные шаблоны договоров различных типов (физические лица, юридические лица, краткосрочная аренда, долгосрочная аренда)
  - Шаблоны регулярно обновляются юридическим отделом в соответствии с изменениями законодательства

**Описание работы:**

Система определяет тип необходимого шаблона договора на основе:
- Типа клиента (физическое или юридическое лицо)
- Категории оборудования (простое, дорогостоящее, требующее специальных условий)
- Срока аренды (краткосрочная до 7 дней, среднесрочная до 30 дней, долгосрочная свыше 30 дней)

Затем извлекает соответствующий шаблон из базы данных и передает его на следующий этап для заполнения.

#### Подпроцесс 1.2: Заполнить данные договора

**Назначение:** Автоматическое заполнение шаблона договора всеми необходимыми данными о клиенте, оборудовании и условиях аренды.

**Входящие потоки:**
- **Шаблон договора** ← Процесс 1.1
- **Данные клиента** ← Внешняя сущность "Клиент" (ФИО, паспортные данные, контакты)
- **Профиль клиента** ← БД клиентов (история аренды, рейтинг, скидки, особые условия)
- **Данные бронирования** ← Внешний источник (оборудование, сроки, стоимость)
- **Данные оборудования** ← БД оборудования (подробное описание, серийный номер, техническое состояние)

**Исходящие потоки:**
- **Черновик договора** → Процесс 1.3 (заполненный договор для проверки)
- **Ошибки для исправления** ← Процесс 1.3 (при обнаружении проблем, обратная связь)

**Взаимодействие с хранилищами:**
- **БД клиентов** (чтение) — получение полной информации о клиенте
- **БД оборудования** (чтение) — получение характеристик арендуемого оборудования

**Описание работы:**

Система автоматически заполняет все разделы договора:

1. **Раздел "Стороны договора":**
   - Данные арендодателя (компания SportRent)
   - Данные арендатора (клиент): ФИО, паспорт, адрес регистрации, контакты

2. **Раздел "Предмет договора":**
   - Наименование оборудования
   - Серийный номер и инвентарный номер
   - Техническое состояние на момент передачи
   - Комплектность

3. **Раздел "Условия аренды":**
   - Срок аренды (дата начала, дата окончания)
   - Стоимость аренды (за день/неделю/месяц)
   - Общая стоимость за весь период
   - Размер залога (если применимо)
   - Условия продления

4. **Раздел "Обязанности сторон":**
   - Обязанности арендодателя
   - Обязанности арендатора
   - Порядок передачи и возврата оборудования

5. **Раздел "Ответственность сторон":**
   - Штрафы за нарушение сроков
   - Ответственность за повреждение оборудования
   - Порядок разрешения споров

6. **Служебная информация:**
   - Уникальный номер договора
   - Дата формирования
   - Ссылка на бронирование

При получении информации об ошибках из процесса 1.3, данный процесс исправляет выявленные проблемы и повторно передает договор на проверку.

#### Подпроцесс 1.3: Проверить корректность данных

**Назначение:** Автоматическая валидация заполненного договора на предмет ошибок, пропущенных полей и несоответствий.

**Входящие потоки:**
- **Черновик договора** ← Процесс 1.2

**Исходящие потоки:**
- **Проверенный договор** → Процесс 1.4 (если все проверки пройдены успешно)
- **Ошибки для исправления** → Процесс 1.2 (список выявленных проблем, обратная связь)

**Описание работы:**

Система выполняет многоуровневую проверку договора:

**Уровень 1: Проверка заполненности**
- Все обязательные поля заполнены
- Нет пустых значений в критичных разделах
- Присутствуют все необходимые разделы

**Уровень 2: Валидация данных**
- Корректность формата паспортных данных (серия, номер)
- Корректность email-адреса и номера телефона
- Корректность дат (дата окончания после даты начала)
- Корректность числовых значений (стоимость, залог)

**Уровень 3: Бизнес-правила**
- Срок аренды не превышает максимально допустимый для данного типа оборудования
- Стоимость корректно рассчитана на основе тарифов
- Размер залога соответствует политике компании
- Клиент не находится в "черном списке"

**Уровень 4: Проверка доступности**
- Оборудование действительно доступно в указанные сроки
- Нет конфликтов с другими бронированиями
- Оборудование не находится на техническом обслуживании

**Уровень 5: Юридическая корректность**
- Все обязательные юридические формулировки присутствуют
- Условия соответствуют действующему законодательству
- Присутствуют все необходимые пункты согласно требованиям ФЗ-152 о персональных данных

При обнаружении ошибок любого уровня система формирует детальный отчет об ошибках и отправляет его обратно в процесс 1.2 для исправления. Процесс повторяется до тех пор, пока все проверки не будут пройдены успешно.

#### Подпроцесс 1.4: Утвердить договор

**Назначение:** Утверждение договора менеджером компании с учетом статуса оплаты и принятие окончательного решения.

**Входящие потоки:**
- **Проверенный договор** ← Процесс 1.3
- **Статус оплаты** ← Внешняя сущность "Система оплаты" (подтверждение оплаты или внесения залога)
- **Решение менеджера** ← Внешняя сущность "Менеджер" (утверждение или отклонение)

**Исходящие потоки:**
- **Проект на утверждение** → Внешняя сущность "Менеджер" (договор для проверки)
- **Утвержденный договор** → Процесс 1.5 (после успешного утверждения)

**Описание работы:**

Процесс утверждения включает несколько этапов:

**Этап 1: Проверка статуса оплаты**
- Система проверяет наличие подтверждения оплаты или залога
- Сверяет сумму оплаты с условиями договора
- Фиксирует дату и время получения платежа

**Этап 2: Передача менеджеру**
- Договор помещается в очередь на рассмотрение менеджером
- Менеджер получает уведомление о необходимости проверки
- Система показывает менеджеру полную информацию о клиенте, оборудовании и условиях

**Этап 3: Проверка менеджером**

Менеджер оценивает:
- Соответствие условий договора политике компании
- Особые условия для данного клиента (VIP-статус, корпоративные скидки, постоянный клиент)
- История взаимодействия с клиентом (были ли проблемы ранее)
- Адекватность стоимости текущим рыночным условиям
- Необходимость внесения корректировок

**Этап 4: Принятие решения**
- Менеджер утверждает договор (статус "Утвержден")
- Или запрашивает корректировки (возврат к процессу 1.2)
- Или отклоняет договор с указанием причины (завершение процесса с уведомлением клиента)

**Этап 5: Фиксация утверждения**
- Регистрация факта утверждения с указанием ФИО менеджера, даты и времени
- Присвоение договору финального статуса
- Подготовка к сохранению в архив

#### Подпроцесс 1.5: Сохранить договор

**Назначение:** Сохранение утвержденного договора в электронном архиве и фиксация всех сопутствующих данных в системе.

**Входящие потоки:**
- **Утвержденный договор** ← Процесс 1.4

**Исходящие потоки:**
- **Данные договора** → Хранилище "Архив договоров" (сохранение в архив)
- **Договор для выдачи** → Процесс 1.6 (подготовленный документ для передачи клиенту)

**Взаимодействие с хранилищами:**
- **Архив договоров** (запись)

**Описание работы:**

Процесс сохранения включает следующие операции:

**Операция 1: Присвоение уникального номера**
- Генерация уникального номера договора по шаблону: SR-YYYY-MM-NNNN
  - SR — префикс SportRent
  - YYYY — год
  - MM — месяц
  - NNNN — порядковый номер
- Проверка уникальности номера в базе данных

**Операция 2: Формирование PDF с электронной подписью**
- Конвертация договора в формат PDF
- Применение электронной подписи компании
- Добавление водяных знаков для защиты от подделок
- Генерация QR-кода для быстрой проверки подлинности

**Операция 3: Сохранение в архив**
- Размещение PDF-файла в электронном архиве
- Создание резервной копии на удаленном сервере
- Индексация документа для быстрого поиска

**Операция 4: Создание записи в журнале договоров**
- Добавление записи в основную таблицу договоров
- Указание всех атрибутов: номер, дата, клиент, оборудование, сроки, статус
- Связывание с профилем клиента
- Связывание с записью о бронировании
- Связывание с платежной транзакцией

**Операция 5: Обновление статусов связанных объектов**
- Изменение статуса бронирования с "Ожидает оформления" на "Оформлено"
- Обновление статуса оборудования на "Арендовано" с указанием срока
- Фиксация начала периода аренды в календаре оборудования

**Операция 6: Создание задач для персонала**
- Создание задачи для складского персонала на выдачу оборудования
- Создание напоминания о дате возврата оборудования
- Установка триггеров для автоматических уведомлений клиента

#### Подпроцесс 1.6: Сформировать выходной документ

**Назначение:** Подготовка финального документа для передачи клиенту в удобном формате.

**Входящие потоки:**
- **Договор для выдачи** ← Процесс 1.5

**Исходящие потоки:**
- **Договор аренды** → Внешняя сущность "Клиент" (финальный документ)

**Описание работы:**

Система формирует несколько версий договора для различных каналов доставки:

**Версия 1: Электронная копия для email**
- PDF-файл с электронной подписью
- Оптимизирован для просмотра на различных устройствах
- Включает QR-код для проверки подлинности
- Содержит ссылки на личный кабинет клиента
- Автоматически отправляется на email-адрес клиента с темой "Договор аренды №SR-YYYY-MM-NNNN"

**Версия 2: Мобильная версия**
- PDF-файл, адаптированный для мобильных устройств
- Уменьшенный размер файла для быстрой загрузки
- Доступен для скачивания через мобильное приложение SportRent
- Push-уведомление клиенту о готовности документа

**Версия 3: Печатная версия**
- Форматированный документ для печати на принтере
- Подготовка в двух экземплярах (для клиента и для компании)
- Включает места для подписей
- Отправляется на печать в пункте выдачи оборудования

**Версия 4: Версия для архива**
- Долгосрочное хранение в формате PDF/A (архивный формат)
- Максимальная совместимость с будущими системами
- Включение метаданных для индексации и поиска

**Операция финализации:**
- Отправка уведомлений клиенту о готовности договора
- Фиксация времени отправки в журнале событий
- Установка статуса "Договор передан клиенту"
- Ожидание получения подписанного экземпляра от клиента

\newpage

## Описание хранилищ данных

### БД шаблонов договоров

**Назначение:** Централизованное хранение актуальных шаблонов договоров различных типов.

**Содержимое:**
- Шаблоны для физических лиц
- Шаблоны для юридических лиц
- Шаблоны для различных категорий оборудования
- Шаблоны для краткосрочной, среднесрочной и долгосрочной аренды
- Специальные шаблоны для корпоративных клиентов

**Атрибуты шаблонов:**
- Идентификатор шаблона
- Название и описание
- Версия шаблона
- Дата создания и последнего обновления
- Статус (активен/архивирован)
- Автор последних изменений
- Структура документа в формате HTML/XML
- Список обязательных полей для заполнения

**Управление:**
- Регулярно обновляется юридическим отделом
- Версионирование изменений
- Контроль доступа (только юридический отдел может редактировать)

### БД клиентов

**Назначение:** Хранение профилей клиентов системы SportRent с персональными данными и историей взаимодействия.

**Содержимое:**
- Персональные данные (ФИО, дата рождения, пол)
- Паспортные данные (серия, номер, дата выдачи, кем выдан)
- Контактная информация (телефон, email, адрес)
- Статус клиента (обычный, VIP, корпоративный, заблокированный)
- История аренды
- Рейтинг клиента
- Баланс лояльности и скидки
- Особые условия и примечания

**Использование в процессе:**
- Автоматическое заполнение персональных данных в договоре
- Проверка истории взаимодействия (были ли нарушения)
- Применение индивидуальных условий и скидок
- Идентификация VIP-клиентов для приоритетного обслуживания

**Защита данных:**
- Соответствие ФЗ-152 о персональных данных
- Шифрование чувствительных данных
- Ограниченный доступ по ролям
- Аудит всех операций с персональными данными

### БД оборудования

**Назначение:** Каталог всего спортивного оборудования, доступного для аренды в системе SportRent.

**Содержимое:**
- Наименование оборудования
- Категория (велосипеды, лыжи, сноуборды, скейтборды, ролики, самокаты и т.д.)
- Технические характеристики (размер, вес, материал, год выпуска)
- Серийный номер и инвентарный номер
- Текущее состояние (отличное, хорошее, удовлетворительное)
- Стоимость аренды (за час, день, неделю, месяц)
- Размер залога
- Статус доступности (доступно, арендовано, на обслуживании, списано)
- Местоположение (пункт проката)
- Фотографии
- История аренды и обслуживания

**Использование в процессе:**
- Получение подробного описания оборудования для договора
- Проверка технического состояния
- Определение стоимости аренды
- Фиксация начала периода аренды

### Архив договоров

**Назначение:** Централизованное долгосрочное хранилище всех заключенных договоров аренды.

**Содержимое:**
- PDF-файлы договоров с электронными подписями
- Метаданные договоров (номер, дата, стороны, условия)
- Статус договора (активный, завершенный, расторгнутый)
- История изменений статуса
- Связанные документы (акты приема-передачи, дополнительные соглашения)

**Назначение хранилища:**
- Юридическая защита компании в спорных ситуациях
- Подготовка финансовой и налоговой отчетности
- Аудит и проверки контролирующими органами
- Анализ истории взаимодействия с клиентами
- Разрешение споров и претензий

**Требования к хранению:**
- Срок хранения: не менее 5 лет согласно законодательству
- Формат: PDF/A для долгосрочного хранения
- Резервное копирование: ежедневное на удаленный сервер
- Доступ: строго регламентирован, с ведением журнала доступа
- Индексация: полнотекстовый поиск по содержимому договоров

\newpage

## Описание внешних сущностей

### Клиент

**Описание:** Физическое или юридическое лицо, арендующее спортивное оборудование через систему SportRent.

**Роль в процессе:**
- Предоставляет персональные данные для формирования договора
- Получает итоговый договор аренды для ознакомления и подписания
- Подтверждает согласие с условиями договора

**Типы клиентов:**
- **Физические лица** — частные граждане, арендующие оборудование для личного использования
- **Юридические лица** — организации, арендующие оборудование для корпоративных мероприятий или обеспечения сотрудников

**Особенности взаимодействия:**
- Клиент может обновлять свои персональные данные в личном кабинете
- VIP-клиенты получают индивидуальные условия в договоре
- Корпоративные клиенты могут иметь рамочные договоры с упрощенным оформлением

### Менеджер

**Описание:** Сотрудник компании SportRent, ответственный за проверку и утверждение договоров аренды.

**Обязанности:**
- Проверка корректности условий договора
- Оценка рисков по конкретной сделке
- Применение индивидуальных условий для особых случаев
- Принятие окончательного решения об утверждении или отклонении договора
- Разрешение нестандартных ситуаций

**Полномочия:**
- Утверждение стандартных договоров
- Корректировка условий в пределах установленных лимитов
- Предоставление скидок до 20% от стандартной стоимости
- Изменение размера залога
- Продление сроков оплаты для надежных клиентов

**Критерии принятия решений:**
- Соответствие политике компании
- История взаимодействия с клиентом
- Текущая загрузка оборудования
- Финансовые риски
- Особые обстоятельства (сезонные акции, корпоративные клиенты, постоянные клиенты)

### Система оплаты

**Описание:** Внешний модуль обработки платежей, интегрированный с банковскими системами и платежными шлюзами.

**Функции:**
- Обработка платежей клиентов (банковские карты, электронные кошельки, банковские переводы)
- Подтверждение успешности транзакций
- Предоставление информации о статусе оплаты
- Возврат средств при отмене бронирования

**Передаваемые данные:**
- Статус транзакции (успешно, ожидает подтверждения, отклонено, ошибка)
- Сумма платежа
- Дата и время транзакции
- Идентификатор платежа
- Способ оплаты

**Интеграция:**
- API для запросов статуса платежей
- Webhook для получения уведомлений о завершении транзакций
- Защищенное соединение (HTTPS/TLS)
- Соответствие стандарту PCI DSS для обработки платежных данных

\newpage

## Глоссарий

**DFD (Data Flow Diagram)** — диаграмма потоков данных, графическая нотация для описания движения данных в информационной системе.

**Нотация Гейна-Сарсона** — один из двух основных синтаксисов DFD, использующий прямоугольники с закругленными углами для процессов и открытые прямоугольники для хранилищ данных.

**Процесс** — функциональный блок, преобразующий входные данные в выходные путем выполнения определенных операций.

**Поток данных** — передача информации между элементами диаграммы, изображается стрелкой с подписью, описывающей передаваемые данные.

**Хранилище данных** — место постоянного или временного хранения данных (база данных, файл, таблица, архив).

**Внешняя сущность** — объект, находящийся за пределами моделируемой системы, но взаимодействующий с ней (пользователи, внешние системы, организации).

**Декомпозиция** — разбиение сложного процесса на более простые составные части для детального анализа и проектирования.

**Level 0 (Контекстная диаграмма)** — верхний уровень DFD, показывающий систему или процесс как единое целое с внешними взаимодействиями.

**Level 1** — первый уровень детализации, показывающий внутренние процессы, потоки данных и хранилища системы.

**Обратная связь** — возврат данных к предыдущему процессу для исправления ошибок или повторной обработки.

**Валидация данных** — процесс проверки данных на соответствие заданным правилам, форматам и бизнес-требованиям.

**Архив договоров** — централизованное хранилище всех заключенных договоров, используемое для отчетности, аудита и разрешения споров.

**Электронная подпись** — криптографическое средство, обеспечивающее аутентичность и целостность электронного документа.

**QR-код** — двумерный штрих-код, содержащий ссылку для быстрой проверки подлинности документа.

\newpage

## Выводы

В ходе выполнения практической работы № 6 была успешно создана двухуровневая модель потоков данных в нотации DFD для процесса "Оформлять договор аренды" информационной системы SportRent.

### Основные результаты работы

1. **Выбор блока для декомпозиции**

   Из IDEF0-модели, разработанной в лабораторной работе № 5, выбран процесс A33 "Оформлять договор аренды" как наиболее подходящий для демонстрации возможностей нотации DFD. Выбор обоснован сложностью процесса, множественными потоками данных, активным взаимодействием с хранилищами и участием внешних сущностей.

2. **Разработка контекстной диаграммы (Level 0)**

   Создана контекстная диаграмма, показывающая процесс оформления договора как единое целое. Определены:
   - 3 входящих потока данных (данные клиента, данные бронирования, статус оплаты)
   - 3 исходящих потока данных (проект на утверждение, договор клиенту, данные в архив)
   - 5 внешних сущностей (Клиент, Менеджер, Система оплаты, Модуль бронирования, Архив)

3. **Создание детализированной диаграммы (Level 1)**

   Выполнена декомпозиция процесса на 6 взаимосвязанных подпроцессов:
   - 1.1: Получить шаблон договора
   - 1.2: Заполнить данные договора
   - 1.3: Проверить корректность данных
   - 1.4: Утвердить договор
   - 1.5: Сохранить договор
   - 1.6: Сформировать выходной документ

4. **Идентификация ключевых элементов**

   Определены и подробно описаны:
   - 6 процессов (подпроцессы Level 1) с детальным описанием их работы
   - 4 хранилища данных (БД шаблонов, БД клиентов, БД оборудования, Архив договоров)
   - 3 внешние сущности (Клиент, Менеджер, Система оплаты)
   - Более 15 потоков данных между элементами
   - Механизм обратной связи для исправления ошибок (процесс 1.3 → процесс 1.2)

5. **Применение нотации Гейна-Сарсона**

   Использованы все основные элементы нотации DFD по Гейну-Сарсону:
   - Процессы (прямоугольники с закругленными углами)
   - Потоки данных (стрелки с подписями)
   - Хранилища данных (открытые прямоугольники)
   - Внешние сущности (прямоугольники)

### Практическая значимость результатов

Разработанная DFD-модель имеет следующую практическую ценность:

1. **Детальное описание информационных потоков**

   Модель четко показывает, как данные перемещаются между процессами, откуда они поступают и куда направляются. Это критически важно для понимания архитектуры информационной системы.

2. **Выявление хранилищ данных**

   Явное указание всех хранилищ данных и их взаимодействия с процессами служит основой для проектирования базы данных в следующих лабораторных работах.

3. **Идентификация точек контроля**

   Модель показывает ключевые точки, где требуется проверка данных (процесс 1.3) и утверждение менеджером (процесс 1.4), что важно для обеспечения качества данных и соблюдения бизнес-правил.

4. **Основа для технического задания**

   Детальное описание процессов, потоков и хранилищ может быть использовано программистами для разработки технического задания и реализации системы.

5. **Документация для заинтересованных сторон**

   DFD-диаграммы служат наглядной документацией для бизнес-аналитиков, менеджеров проекта, разработчиков и заказчиков, облегчая взаимопонимание.

### Сравнение DFD и IDEF0

В процессе работы стали очевидны различия между нотациями IDEF0 и DFD:

| Аспект | IDEF0 | DFD |
|--------|-------|-----|
| **Основной фокус** | Функции и управление процессами | Потоки данных и их преобразование |
| **Типы стрелок** | Вход, Выход, Управление, Механизм | Только потоки данных (без разделения по типам) |
| **Хранилища данных** | Не показываются явно | Явно показаны как отдельные элементы |
| **Применение** | Функциональное моделирование бизнес-процессов | Проектирование информационных систем и баз данных |
| **Граничные стрелки** | Обязательны для соблюдения ICOM | Не рекомендуются (все через внешние сущности) |

**Вывод:** DFD лучше подходит для проектирования информационных систем с активной работой с базами данных, так как явно показывает хранилища и потоки данных между ними.

### Выявленные особенности процесса

Декомпозиция процесса "Оформлять договор аренды" выявила следующие важные особенности:

1. **Итеративность проверки**

   Процесс включает механизм обратной связи: при обнаружении ошибок в процессе 1.3 данные возвращаются в процесс 1.2 для исправления. Это обеспечивает высокое качество итогового документа.

2. **Множественные источники данных**

   Для формирования договора требуется информация из четырех различных хранилищ: БД шаблонов, БД клиентов, БД оборудования и данные от системы оплаты. Это подчеркивает необходимость интеграции различных модулей системы.

3. **Человеческий фактор**

   Несмотря на высокую степень автоматизации, процесс включает обязательное утверждение менеджером (процесс 1.4), что обеспечивает контроль качества и возможность принятия решений в нестандартных ситуациях.

4. **Архивирование**

   Процесс завершается обязательным сохранением договора в архив, что соответствует требованиям законодательства и обеспечивает юридическую защиту компании.

### Направления дальнейшей работы

1. **Проектирование базы данных**

   На основе выявленных хранилищ данных (БД шаблонов, БД клиентов, БД оборудования, Архив договоров) в следующей лабораторной работе будет разработана ER-диаграмма (Entity-Relationship) с детальным описанием структуры базы данных системы SportRent.

2. **Детализация процесса 1.2**

   Рекомендуется рассмотреть возможность дальнейшей детализации подпроцесса 1.2 "Заполнить данные договора" на уровень Level 2 для более подробного описания логики заполнения различных разделов договора (раздел о сторонах, предмет договора, условия, ответственность).

3. **Оптимизация потоков данных**

   Возможна оптимизация путем кэширования часто используемых данных (например, профили постоянных клиентов) для ускорения процесса формирования договоров.

4. **Валидация с заинтересованными сторонами**

   Необходимо провести валидацию разработанных диаграмм с бизнес-аналитиками, юридическим отделом и менеджерами для уточнения последовательности процессов, требований к данным и бизнес-правил.

5. **Интеграция с другими процессами**

   Следует рассмотреть взаимодействие процесса A33 с соседними процессами (A32 "Формировать бронирование", A34 "Передавать заказ на оплату", A35 "Подтверждать заказ") для создания комплексной модели всего блока A3 "Обрабатывать бронирование и заказы".

### Заключение

Выполнение лабораторной работы № 6 позволило глубже понять процесс оформления договора аренды в системе SportRent и детально проработать информационные потоки. Созданная DFD-модель служит важным этапом проектирования информационной системы и станет основой для разработки структуры базы данных в следующих работах.

Нотация DFD показала свою эффективность для моделирования информационных процессов, особенно при необходимости явного описания хранилищ данных и потоков между ними. Разработанная модель может быть использована как техническая документация для разработчиков и как основа для дальнейшего проектирования системы SportRent.

---

**Примечание:** Диаграммы созданы в PlantUML для удобства версионного контроля. В дальнейшем рекомендуется переработать диаграммы в программе Ramus Educational для полного соответствия стандартам нотации DFD по Гейну-Сарсону и использования встроенных возможностей классификаторов.

\newpage
